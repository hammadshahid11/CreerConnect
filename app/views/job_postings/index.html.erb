<div class="container mt-5">
  <h1 class="mb-4">Job Postings</h1>

  <% @job_postings.each do |job_posting| %>
    <% if job_posting.status == 'approved' %>
      <div class="card mb-4">
        <div class="card-body">
          <h2 class="card-title"><%= job_posting.title %></h2>
          <p class="card-text"><strong>Company:</strong> <%= job_posting.company_name %></p>
          <p class="card-text"><strong>Description:</strong> <%= job_posting.description %></p>
          
          <%= link_to "View Applicants", company_profile_job_posting_view_applicants_path(company_profile_id: job_posting.company_profile.id, job_posting_id: job_posting.id), class: "btn btn-success mr-2" %>

          <%= link_to "Delete Job Posting",
            company_profile_job_posting_path(job_posting.company_profile, job_posting),
            method: :delete,
            data: {
              turbo_confirm: "Are you sure you want to delete this job posting?",
              turbo_method: :delete,
              turbo_frame: 'job_postings' # This should match the Turbo Frame ID you want to update
            },
            class: "btn btn-danger" %>
        </div>
      </div>
    <% end %>
  <% end %>


</div>
